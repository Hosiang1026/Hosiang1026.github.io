<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="Access-Control-Allow-Origin" content="*"><script type="text/javascript">var start_time=(new Date).getTime()</script><meta http-equiv="Cache-Control" content="no-cache"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="google-site-verification" content="9Wt3lmnrT2bfjaHla5s16adhvcQcBHO7PtNf97n5Od0"><meta name="baidu-site-verification" content="RYlYHsgO7Y"><meta name="sogou_site_verification" content="MSmrTj7lHV"><meta name="shenma-site-verification" content="e4428ccce0f22fad61c3716193bf4bd7_1571416388"><meta name="baidu_union_verify" content="584bb6b4bd24108df082b6d20c7aa9be"><title>推荐系列-前端如何做测试驱动开发-vue版 | 狂欢马克思</title><meta name="keywords" content="分享技术经验与交流"><meta name="description" content="&amp;emsp;&amp;emsp;最近和测试杠上了，写了的文章都和测试相关。当然，这里的「测试」并不是具体的某个角色，而是验证程序正确性的工作。曾经，前端如何 TDD 困扰了我很久，随着时间的推移，前端框架开始成熟，…"><meta property="og:type" content="article"><meta property="og:title" content="推荐系列-前端如何做测试驱动开发-vue版"><meta property="og:url" content="https://www.hosiang.cn/b549d477/index.html"><meta property="og:site_name" content="狂欢马克思"><meta property="og:description" content="&amp;emsp;&amp;emsp;最近和测试杠上了，写了的文章都和测试相关。当然，这里的「测试」并不是具体的某个角色，而是验证程序正确性的工作。曾经，前端如何 TDD 困扰了我很久，随着时间的推移，前端框架开始成熟，…"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="og:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><meta property="article:published_time" content="2021-04-15T01:19:21.000Z"><meta property="article:modified_time" content="2022-06-22T09:35:22.779Z"><meta property="article:author" content="Howe Hsiang"><meta property="article:tag" content="Popular"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg"><link rel="icon" href="/images/favicon.ico"><link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="https://cdn.bootcss.com/font-awesome-animation/0.1.0/font-awesome-animation.min.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3cd8fa109426bf3f10bd5c362175bace";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script></script><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="generator" content="Hexo 6.2.0"></head><script src="/js/jquery.min.js"></script><script src="/js/pace.min.js"></script><script src="/js/crypto-js.js"></script><script src="/js/cookie.js"></script><script src="/js/calendar.js"></script><script src="/js/festival.js"></script><script>getFestival()</script><body><script>window.onload=function(){document.getElementById("TimeShow").innerHTML="本站耗时 "+((new Date).getTime()-start_time)/1e3+" 秒 "}</script><div id="container"><header id="header"><div id="banner"></div><div id="header-outer"><div id="header-menu" class="header-menu-pos animated"><div class="header-menu-container"><a href="/" class="left"><span class="site-title">狂欢马克思</span></a><nav id="header-menu-nav" class="right"><a href="/" rel="external nofollow"><i class="fa fa-home"></i> <span>主页</span> </a><a href="/archives" rel="external nofollow"><i class="fa fa-archive"></i> <span>归档</span> </a><a href="/gitbook" rel="external nofollow"><i class="fa fa-columns"></i> <span>笔记</span> </a><a href="/music" rel="external nofollow"><i class="fa fa-music"></i> <span>音乐</span> </a><a href="/photo" rel="external nofollow"><i class="fa fa-picture-o"></i> <span>相册</span> </a><a href="/love" rel="external nofollow"><i class="fa fa-heart"></i> <span>恋爱</span> </a><a href="/collection" rel="external nofollow"><i class="fa fa-envira"></i> <span>收藏</span> </a><a href="/about" rel="external nofollow"><i class="fa fa-user"></i> <span>关于</span></a></nav><a class="mobile-header-menu-button"><i class="fa fa-bars"></i></a></div></div><div id="header-row"><div id="logo"><a href="/"><img src="/../images/logo.png" alt="logo"></a></div><div class="header-info"><div id="header-title"><h2>狂欢马克思</h2></div><div id="header-description"><h3>专注Web开发</h3></div></div><nav class="header-nav"><div class="social"><a title="Github" target="_blank" href="//github.com/Hosiang1026" rel="external nofollow"><i class="fa fa-github fa-2x"></i></a> <a title="QQ" target="_blank" href="//wpa.qq.com/msgrd?v=3&uin=641904695&site=qq&menu=yes" rel="external nofollow"><i class="fa fa-qq fa-2x"></i></a> <a title="Weibo" target="_blank" href="//www.weibo.com/haoxiang969" rel="external nofollow"><i class="fa fa-weibo fa-2x"></i></a></div></nav></div><script type="text/javascript" src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><div id="noticeId" class="show" style="background:rgb(244,247,247,.3)"><marquee id="noticeMar" behavior="scoll" class="notice" direction="left" onmouseover="this.stop()" onmouseout="this.start()"></marquee></div><script type="text/javascript">function browserRedirect(){var i=navigator.userAgent.toLowerCase(),n="ipad"==i.match(/ipad/i),e="iphone os"==i.match(/iphone os/i),o="midp"==i.match(/midp/i),a="rv:1.2.3.4"==i.match(/rv:1.2.3.4/i),s="ucweb"==i.match(/ucweb/i),t="android"==i.match(/android/i),r="windows ce"==i.match(/windows ce/i),c="windows mobile"==i.match(/windows mobile/i),d="",m=randomColor(),d=n||e||o||a||s||t||r||c?($("#noticeId").css({"line-height":"1.6em"}),"<font style='color:"+m+"' face='新华宋体'  size='2'>官宣：<span id='msg'></span><span id='timer'></span><span id='jinrishici-sentence'></span></font> "):($("#noticeId").css({"line-height":"3.6em","margin-top":"20px"}),"<font style='color:"+m+"' face='新华宋体'  size='6'>官宣：<span id='weekend'></span><span id='msg'></span><span id='timer'></span><span id='jinrishici-sentence'></span></font> ");$("#noticeMar").html(d)}function randomColor(){for(var i="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),n="#",e=0;e<6;e++)n+=i[Math.floor(16*Math.random())];return n}$(function(){browserRedirect()})</script></div></header><script>console.log=function(){}</script><div class="outer"><section id="main" class="body-wrap"><article id="post-前端如何做测试驱动开发-vue版" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="post-title" itemprop="name">推荐系列-前端如何做测试驱动开发-vue版</h1><div class="post-title-bar"><ul><li><i class="fa fa-book"></i> <a href="/categories/热门文章/">热门文章</a></li><li><i class="fa fa-calendar"></i> 2021-04-15</li><li><i class="fa fa-eye"></i> <span id="busuanzi_value_page_pv"></span></li><li><span class="post-count">字数统计: 5.5k字</span></li><li><span class="post-count">阅读时长: 26分钟</span></li></ul></div></header><div class="article-entry post-content" itemprop="articleBody"><p>&amp;emsp;&amp;emsp;最近和测试杠上了，写了的文章都和测试相关。当然，这里的「测试」并不是具体的某个角色，而是验证程序正确性的工作。曾经，前端如何 TDD 困扰了我很久，随着时间的推移，前端框架开始成熟，…</p><span id="more"></span><pre><code>                                                                                                                                                                                    ![Test](https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg  &#39;前端如何做测试驱动开��-vue版&#39;) 
</code></pre><p>最近和测试杠上了，写了的文章都和测试相关。当然，这里的「测试」并不是具体的某个角色，而是验证程序正确性的工作。曾经，前端如何 TDD 困扰了我很久，随着时间的推移，前端框架开始成熟，我对前端测试有了更深刻的理解，把我做前端 TDD 的方法分享给大家。</p><h3 id="理论篇"><a href="#理论篇" class="headerlink" title="理论篇"></a>理论篇</h3><p>测试驱动开发，英文全称 Test-Driven Development（简称 TDD），是由Kent Beck 先生在极限编程（XP）中倡导的开发方法。以其倡导先写测试程序，然后编码实现其功能得名。<br>TDD 能从技术的角度帮我们提高代码质量，使代码执行结果正确，容易理解。由于有测试的保障，开发者可以更放心的重构自己的代码。<br>当有变更时，测试同学最关心变更的影响范围，然而开发者也很难精准确定变更所带来的影响。虽然我们不追求测试覆盖率，但足够的测试覆盖总是能够给我们更多的信心，TDD 则是增加测试覆盖的唯一途径。<br>在面对一个完全没有思路的算法的时候，TDD 则变成了测试驱动设计（Test-Driven Design）。选一个最简单的用例，用最简单的代码通过测试。逐渐增加测试 Case、通过测试 、重构来驱动出设计。</p><h5 id="TDD-的步骤"><a href="#TDD-的步骤" class="headerlink" title="TDD 的步骤"></a>TDD 的步骤</h5><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"></p><p>写一个失败的测试<br>写一个刚好让测试通过的代码<br>重构上面的代码</p><p>每一个步骤都是带上一个角色的帽子🎩 ，让你更专注当下这个角色应该做的事。</p><h5 id="TDD-的三原则"><a href="#TDD-的三原则" class="headerlink" title="TDD 的三原则"></a>TDD 的三原则</h5><p>没有测试之前不要写任何功能代码<br>一次只写一个刚好失败的测试，作为新加功能的描述<br>不写任何多余的产品代码，除⾮它刚好能让失败的测试通过</p><p>TDD 写出的代码的验证逻辑针对的是独立的代码块，可能不是系统中的业务完整功能。用测试先行的方法写出的漂亮的代码也可能做出的功能不是客户想要的（因为需求理解的错误所导致）。因此，使用 「验收驱动测试开发(ATDD)」是很有必要。</p><h5 id="验收驱动测试开发——ATDD-Acceptance-Test-Driven-Development"><a href="#验收驱动测试开发——ATDD-Acceptance-Test-Driven-Development" class="headerlink" title="验收驱动测试开发——ATDD(Acceptance Test Driven Development)"></a>验收驱动测试开发——ATDD(Acceptance Test Driven Development)</h5><p>ATDD 通���名��就可以看出和 TDD 有着某种神秘的联系， ATDD 是 TDD 的延伸。<br>在传统做法中，要给系统添加新的特性，开发人员会按照文档开发，测试，最后交给客户验收。ATDD 则有些不同：在编码前先明确新特性的验收标准，将验收标准转换成测试用例（代码），再编写代码让测试通过，当所有的验收条件被满足，也就意味着这个功能完整的实现。<br>2003 年左右的时候 Kent Beck 曾对 ATDD 提出质疑，时间太早不好查证，我个人猜测原因是 验收条件做为一个 测试 Case 在某些时候会比较大。<br>举个例子：</p><blockquote><p>如果用户购物车里勾选了可以购买的商品，当用户点击下单，则系统为其创建了一个包含勾选商品的一个订单。<br>可以看出这个验收条件可能要写上一大堆的功能点（如：锁定库存、创建订单等等）才能满足，开发人员必须将 Case 再进行拆分。<br>创建订单的伪代码：</p></blockquote><pre><code class="java"> public Order create(List&lt;product&gt; products) &#123;
 // 锁定库存
 // 创建订单
 // 创建定时任务(以便超时支付，而取消订单、释放库存)
 // ...
 return null;
&#125;
</code></pre><p>将注释的地方写出相应的函数，如： <code>java lockStock()</code> 、 <code>java createOrder()</code> 、 &#96;&#96;&#96;java<br>createOrderTimeoutTask()</p><pre><code class="...并为这些函数编写单元测试再去实现。当然，你并不需要一次全部完成，而是一次只实现一个任务。">尽管 Kent Beck 曾对 ATDD 提出过质疑，但却为 2012 年出版的《ATDD by Example》 写了推荐序，ATDD 也早成为公认的做法。相比后端，前端更适合使用 ATDD。 
###### 测试条件格式 
测试条件通常遵循以下形式： 
&gt;Given (如果) &gt;​ 指定的状态，通常是给出的条件； &gt;When (当) &gt;​ 触发一个动作或者事件； &gt;Then (则) &gt;​ 对期望结果的验证； 
写 JavaScript 同学要比 Java 同学幸福很多，不需要把函数名写的老长： 
 ```java 
it(&#39;Given a = 1 And b = 2，When execute add()，Then result is 3&#39;, () =&amp;gt; &#123;
// ...
&#125;);

// 如果团队更习惯用中文，可以这样：
it(&#39;如果： a = 1 并且 b = 2，当：执行 add()，则：结果是 3&#39;, () =&amp;gt; &#123;
// ...
&#125;);
</code></pre><h3 id="实践篇"><a href="#实践篇" class="headerlink" title="实践篇"></a>实践篇</h3><p>以往的示例都是拿算法来实践，搞的同学们以为 TDD 只适合做一些算法题，所以这次我们不拿算法来做实例，使用一个相对真实且简单的需求——登录。</p><h4 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h4><pre><code class="java"> vue create vue-tdd-demo
</code></pre><p><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"><br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"><br>勾选 Unit Testing （单元测试），后面按照自己喜好来选择。<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"><br>这里选择 Jest 作为测试框架。</p><h5 id="验证环境"><a href="#验证环境" class="headerlink" title="验证环境"></a>验证环境</h5><p>安装好之后运行 &#96;&#96;&#96;java<br>npm run test:unit</p><pre><code class="，刚安装的项目就会报错，真让人惆怅！看看如何解决：">![Test](https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg  &#39;前端如何做测试驱动开��-vue版&#39;) 
jest.config.js 或者 package.json 中找到  ```java 
transformIgnorePatterns
```  这个配置 
 ```java 
// ...
transformIgnorePatterns: [
  &#39;/node_modules/&#39;,
  &#39;/node_modules/(?!vue-awesome)&#39;, // 添加此行
],
</code></pre><p>再运行 &#96;&#96;&#96;java<br>npm run test:unit</p><pre><code>![Test](https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg  &#39;前端如何做测试驱动开��-vue版&#39;) 
#### 演练实例 
##### 需求 
![Test](https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg  &#39;前端如何做测试驱动开��-vue版&#39;) 
&gt; 页面包含用户名、密码输入框和提交按钮，提交之后成功服务端返回状态为 200 然后跳转到 Home 首页，失败则  ```java 
alert()
```  文字提示。 &gt; &gt; 在用户名密码为空时不能提交。 
通常前端功能可分为两部分，一部分是接口、另一部分是页面。 
我们先来实现接口部分： 
##### 接口 Service 测试 
请求模块使用 axios ，axios-mock-adapter 是一个辅助模块，帮助我们验证接口调用是否正确。 
###### 任务拆分 
&gt; 登录 Service.login 方法，接受 user 对象(username、password) ，使用 axios 发送请求，URL 为  ```java 
/users/tokens
``` ，使用  ```java 
POST
```  方式，返回一个Response 的 Promise 对象； &gt; &gt; 当输入调用  ```java 
Service.login(&#123;username: &#39;谢小呆&#39;, password: &#39;123&#39;&#125;);
```  ，则 axios post 的数据则与参数相同； 
###### 安装依赖 
 ```java 
npm install axios
npm install axios-mock-adapter --save-dev
# or
yarn add axios
yarn add axios-mock-adapter -D
</code></pre><h6 id="编写测试"><a href="#编写测试" class="headerlink" title="编写测试"></a>编写测试</h6><pre><code class="java"> import axios from &#39;axios&#39;;
import MockAdapter from &#39;axios-mock-adapter&#39;;
import Service from &#39;@/login/service&#39;;

describe(&#39;Login service&#39;, () =&amp;gt; &#123;
 it(&#39;Given 登录信息为 谢小呆,123, When 执行 Service.login() 时，Then 请求参数为 谢小呆,123 的用户&#39;, async () =&amp;gt; &#123;
   const mock = new MockAdapter(axios);
   const expectedResult = &#123; username: &#39;谢小呆&#39;, password: &#39;123&#39; &#125;;
   mock.onPost(&#39;/users/token&#39;).reply(200);

   await Service.login(expectedResult);
   expect(mock.history.post.length).toBe(1);
   expect(mock.history.post[0].data).toBe(JSON.stringify(expectedResult));
 &#125;);
&#125;);

</code></pre><p>这里验证了传入的「参数」与 &#96;&#96;&#96;java<br>POST</p><pre><code class="的数据是否一致，我们并没有真正去发网络请求，也没有必要。毕竟我们并不关心接口「此时」是否能通，只要后端按照我们的接口约定给出特定的返回即可。对单元测试不了解的同学可以参考这里。">此时运行  ```java 
yarn run test:unit
```  缺少 service.js 文件。 
创建 src/login/service.js 文件 
 ```java 
import axios from &#39;axios&#39;;

const login = user =&amp;gt; axios.post(&#39;/users/token&#39;, user);

export default &#123;
login,
&#125;;

</code></pre><p>再次运行 &#96;&#96;&#96;java<br>yarn run test:unit</p><pre><code class="，测试通过！">##### 页面、组件测试 
对于 Vue 来说页面和组件是同一个东西，Vue 提供了一个很方便的单元测试工具 vue-test-units ，这里就不过多赘述其用法，参考官方文档即可。 
任务：当用户访问页面时可以看到用户名、密码输入框和提交按钮，所以页面中只要包含这 3 个元素即可。 
 ```java 
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
it(&#39;When 用户访问登录页面，Then 看到用户名、密码输入框和提交按钮&#39;, () =&amp;gt; &#123;
  const wrapper = mount(Login);
  expect(wrapper.find(&#39;input.username&#39;).exists()).toBeTruthy();
  expect(wrapper.find(&#39;input.password&#39;).exists()).toBeTruthy();
  expect(wrapper.find(&#39;button.submit&#39;).exists()).toBeTruthy();
&#125;);
&#125;);

</code></pre><p>运行测试报错，缺少 &#96;&#96;&#96;java<br>@&#x2F;login&#x2F;index.vue</p><pre><code class="文件"> ```java 
&lt;template&gt;
&lt;ul&gt;
  &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
  &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
  &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/template&gt;

</code></pre><p>再次运行 &#96;&#96;&#96;java<br>yarn run test:unit</p><pre><code class="，通过！添加新的">任务：实现双向绑定，在input 中输入用户名为 谢小呆，密码为 123，vue 的 vm.user 为 &#123;username: &#39;谢小呆&#39;, password: &#39;123&#39;&#125;; 
 ```java 
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
it(&#39;When 用户访问登录页面，Then 看到用户名、密码输入框和提交按钮&#39;, () =&amp;gt; &#123;
  const wrapper = mount(Login);
  expect(wrapper.find(&#39;input.username&#39;).exists()).toBeTruthy();
  expect(wrapper.find(&#39;input.password&#39;).exists()).toBeTruthy();
  expect(wrapper.find(&#39;button.submit&#39;).exists()).toBeTruthy();
&#125;);

it(&#39;Given 用户访问登录页面，When 用户输入用户名为 谢小呆, 密码为 123，Then 页面中的 user 为 &#123;username: &quot;谢小呆&quot;, password: &quot;123&quot;&#125;&#39;, () =&amp;gt; &#123;
  const wrapper = mount(Login);
  wrapper.find(&#39;input.username&#39;).setValue(&#39;谢小呆&#39;);
  wrapper.find(&#39;input.password&#39;).setValue(&#39;123&#39;);

  const expectedResult = &#123; username: &#39;谢小呆&#39;, password: &#39;123&#39; &#125;;
  expect(wrapper.vm.user).toEqual(expectedResult);
&#125;);
&#125;);

</code></pre><p>运行测试，报错：</p><pre><code class="java">   Expected value to equal:
     &#123;&quot;password&quot;: &quot;123&quot;, &quot;username&quot;: &quot;谢小呆&quot;&#125;
 Received:
     undefined
</code></pre><p>来添加需要绑定的对象：</p><pre><code class="java"> &lt;template&gt;
 &lt;ul&gt;
   &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
   &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
   &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
 data: () =&gt; (&#123;
   user: &#123;
     username: &#39;&#39;,
     password: &#39;&#39;,
   &#125;,
 &#125;),
&#125;;
&lt;/script&gt;

</code></pre><p>测试通过！<br>任务：事件绑定，点击提交按钮，调用 onSubmit 方法，验证 onSubmit 是否被调用。<br>验证方法被调用需要使用 sinon 库。</p><pre><code class="java"> npm install sinon --save-dev
# or
yarn add sinon -D
</code></pre><pre><code class="java"> import sinon from &#39;sinon&#39;;
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
 // ...

 it(&#39;Given 用户访问登录页面，When 用户点击 submit，Then onSubmit 方法被调用&#39;, () =&amp;gt; &#123;
   const wrapper = mount(Login);
   const onSubmit = sinon.fake();
   wrapper.setMethods(&#123; onSubmit &#125;);
   wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);

   expect(onSubmit.called).toBeTruthy();
 &#125;);
&#125;);


</code></pre><p>trigger 点击事件后调用 &#96;&#96;&#96;java<br>onSubmit</p><pre><code class="方法。通过">运行测试，报错： 
 ```java 
 FAIL  tests/unit/login/index.spec.js
● Login Page › Given 用户访问登录页面，When 用户点击 submit，Then onSubmit 方法被调用

  expect(received).toBeTruthy()

  Received: false

    26 |     wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);
    27 | 
  &amp;gt; 28 |     expect(onSubmit.called).toBeTruthy();
       |                             ^
    29 |   &#125;);
    30 | &#125;);
    31 | 

    at Object.toBeTruthy (tests/unit/login/index.spec.js:28:29)
</code></pre><p>修改代码，添加绑定事件和函数：</p><pre><code class="java"> &lt;template&gt;
 &lt;ul&gt;
   &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
   &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
   &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
 data: () =&gt; (&#123;
   user: &#123;
     username: &#39;&#39;,
     password: &#39;&#39;,
   &#125;,
 &#125;),
 methods: &#123;
   onSubmit() &#123;

   &#125;,
 &#125;,
&#125;;
&lt;/script&gt;

</code></pre><p>运行测试，通过！<br>任务：增加验证，当用户名、密码为空时，提交按钮为 disabled 状态</p><pre><code class="java"> import sinon from &#39;sinon&#39;;
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
 // ...

 it(&#39;Given 用户访问登录页面，When 用户点击 submit，Then onSubmit 方法被调用&#39;, () =&amp;gt; &#123;
   const wrapper = mount(Login);
   const onSubmit = sinon.fake();
   wrapper.setMethods(&#123; onSubmit &#125;);
   wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);

   expect(onSubmit.called).toBeTruthy();
 &#125;);

 it(&#39;Given 用户访问登录页面，When 用户未输入登录信息，Then submit 按钮为 disabled And 点击 submit 不会调用 onSubmit&#39;, () =&amp;gt; &#123;
   const wrapper = mount(Login);
   const onSubmit = sinon.fake();
   wrapper.setMethods(&#123; onSubmit &#125;);
   const submitBtn = wrapper.find(&#39;button.submit&#39;);
   submitBtn.trigger(&#39;click&#39;);

   expect(submitBtn.attributes(&#39;disabled&#39;)).toEqual(&#39;disabled&#39;);
   expect(onSubmit.called).toBeFalsy();
 &#125;);
&#125;);

</code></pre><p>运行测试，报错：</p><pre><code class="java"> ● Login Page › Given 用户访问登录页面，When 用户未输入登录信息，Then submit 按钮为 disabled And 点击 submit 不会调用 onSubmit

   expect(received).toEqual(expected)

   Expected value to equal:
     &quot;disabled&quot;
   Received:
     undefined

   Difference:

     Comparing two different types of values. Expected string but received undefined.

     36 |     submitBtn.trigger(&#39;click&#39;);
     37 | 
   &amp;gt; 38 |     expect(submitBtn.attributes(&#39;disabled&#39;)).toEqual(&#39;disabled&#39;);
        |                                              ^
     39 |     expect(onSubmit.called).toBeFalsy();
     40 |   &#125;);
     41 | &#125;);

     at Object.toEqual (tests/unit/login/index.spec.js:38:46)
</code></pre><p>修改代码，使测试通过：</p><pre><code class="java"> &lt;template&gt;
 &lt;ul&gt;
   &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
   &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
   &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot; :disabled=&quot;!validate&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
export default &#123;
 data: () =&gt; (&#123;
   user: &#123;
     username: &#39;&#39;,
     password: &#39;&#39;,
   &#125;,
 &#125;),
 computed: &#123;
   validate() &#123;
     return this.user.username &amp;&amp; this.user.password;
   &#125;,
 &#125;,
 methods: &#123;
   onSubmit() &#123;

   &#125;,
 &#125;,
&#125;;
&lt;/script&gt;

</code></pre><p>运行！</p><pre><code class="java">  FAIL  tests/unit/login/index.spec.js
 ● Login Page › Given 用户访问登录页面，When 用户点击 submit，Then onSubmit 方法被调用

   expect(received).toBeTruthy()

   Received: false

     26 |     wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);
     27 | 
   &amp;gt; 28 |     expect(onSubmit.called).toBeTruthy();
        |                             ^
     29 |   &#125;);
     30 | 
     31 |   it(&#39;Given 用户访问登录页面，When 用户未输入登录信息，Then submit 按钮为 disabled And 点击 submit 不会调用 onSubmit&#39;, () =&amp;gt; &#123;

     at Object.toBeTruthy (tests/unit/login/index.spec.js:28:29)
</code></pre><p>唉？又报错了！报错的 case 不是刚刚的这个，而是上一个 case 报错了。因添加了 validate 验证之后，在没有数据的情况下，点击按钮不会调用 onSubmit 方法。<br>修改 case ，添加登录信息：</p><pre><code class="java"> it(&#39;Given 用户访问登录页面 And 用户输入用户名、密码，When 点击 submit，Then onSubmit 方法被调用&#39;, () =&amp;gt; &#123;
   const wrapper = mount(Login);
   const onSubmit = sinon.fake();
   wrapper.setMethods(&#123; onSubmit &#125;);
   wrapper.find(&#39;input.username&#39;).setValue(&#39;谢小呆&#39;);
   wrapper.find(&#39;input.password&#39;).setValue(&#39;123&#39;);
   wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);

   expect(onSubmit.called).toBeTruthy();
 &#125;);
</code></pre><p>再运行，测试通过！<br>任务：用户输入登录信息后提交，返回状态应该为 200，并且调用 loginSuccess() 方法。<br>由于我们之前已经测试过 Service.login，所以我们这里不再进行测试，而是将 Service.login 制作一个替身，让它返回 200。</p><pre><code class="java"> import Vue from &#39;vue&#39;;
import sinon from &#39;sinon&#39;;
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;
import Service from &#39;@/login/service&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
 // ...

 it(&#39;Given 用户访问登录页面 And 用户输入用户名、密码，When 点击 submit，Then 调用 Service.login() 后返回 200 And 调用 loginSuccess 方法&#39;, async () =&amp;gt; &#123;
   const stub = sinon.stub(Service, &#39;login&#39;);
   stub.resolves(&#123; status: 200 &#125;);

   const wrapper = mount(Login);
   const loginSuccess = sinon.fake();
   wrapper.setMethods(&#123; loginSuccess &#125;);

   const expectedUser = &#123; username: &#39;谢小呆&#39;, password: &#39;123&#39; &#125;;
   wrapper.find(&#39;input.username&#39;).setValue(expectedUser.username);
   wrapper.find(&#39;input.password&#39;).setValue(expectedUser.password);
   wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);

   await Vue.nextTick();

   expect(loginSuccess.called).toBeTruthy();
   expect(stub.alwaysCalledWith(expectedUser)).toBeTruthy();
   stub.restore();
 &#125;);
&#125;);

</code></pre><p>因为是异步请求，所以需要 &#96;&#96;&#96;java<br>Vue.nextTick</p><pre><code class="来等待堆栈处理完成，再进行验证。断言验证">运行测试，失败！篇幅关系就不再贴失败结果。 
修改代码： 
 ```java 
&lt;template&gt;
&lt;ul&gt;
  &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
  &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
  &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot; :disabled=&quot;!validate&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
import Service from &#39;./service&#39;;

export default &#123;
data: () =&gt; (&#123;
  user: &#123;
    username: &#39;&#39;,
    password: &#39;&#39;,
  &#125;,
&#125;),
computed: &#123;
  validate() &#123;
    return this.user.username &amp;&amp; this.user.password;
  &#125;,
&#125;,
methods: &#123;
  async onSubmit() &#123;
    const response = await Service.login(this.user);
    if (response.status === 200) &#123;
      this.loginSuccess();
    &#125;
  &#125;,
  loginSuccess() &#123;
    this.$router.push(&#123; name: &#39;home&#39; &#125;);
  &#125;,
&#125;,
&#125;;
&lt;/script&gt;

</code></pre><p>添加完整的功能，运行测试，通过！<br>任务：用户登录提交后返回错误状态，调用 loginFailure() 方法。</p><pre><code class="java"> import Vue from &#39;vue&#39;;
import sinon from &#39;sinon&#39;;
import &#123; mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;
import Service from &#39;@/login/service&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
 // ...

 it(&#39;Given 用户访问登录页面 And 用户输入用户名、密码，When 点击 submit，Then 调用 Service.login() 后返回不等于 200 And 调用 loginFailure 方法&#39;, async () =&amp;gt; &#123;
   const stub = sinon.stub(Service, &#39;login&#39;);
   stub.resolves(&#123; status: 404 &#125;);

   const wrapper = mount(Login);
   const loginFailure = sinon.fake();
   wrapper.setMethods(&#123; loginFailure &#125;);

   const user = &#123; username: &#39;谢小呆&#39;, password: &#39;123&#39; &#125;;
   wrapper.find(&#39;input.username&#39;).setValue(user.username);
   wrapper.find(&#39;input.password&#39;).setValue(user.password);
   wrapper.find(&#39;button.submit&#39;).trigger(&#39;click&#39;);

   await Vue.nextTick();

   expect(loginFailure.called).toBeTruthy();
   stub.restore();
 &#125;);
&#125;);

</code></pre><p>运行测试，失败！<br>修改代码：</p><pre><code class="java"> &lt;template&gt;
 &lt;ul&gt;
   &lt;li&gt;用户名：&lt;input type=&quot;text&quot; class=&quot;username&quot; v-model=&quot;user.username&quot;&gt;&lt;/li&gt;
   &lt;li&gt;密码：&lt;input type=&quot;text&quot; class=&quot;password&quot; v-model=&quot;user.password&quot;&gt;&lt;/li&gt;
   &lt;li&gt;&lt;button class=&quot;submit&quot; @click=&quot;onSubmit&quot; :disabled=&quot;!validate&quot;&gt;提交&lt;/button&gt;&lt;/li&gt;
 &lt;/ul&gt;
&lt;/template&gt;

&lt;script&gt;
import Service from &#39;./service&#39;;

export default &#123;
 data: () =&gt; (&#123;
   user: &#123;
     username: &#39;&#39;,
     password: &#39;&#39;,
   &#125;,
 &#125;),
 computed: &#123;
   validate() &#123;
     return this.user.username &amp;&amp; this.user.password;
   &#125;,
 &#125;,
 methods: &#123;
   async onSubmit() &#123;
     const response = await Service.login(this.user);
     if (response.status === 200) &#123;
       this.loginSuccess();
       return;
     &#125;
     this.loginFailure();
   &#125;,
   loginSuccess() &#123;
     this.$router.push(&#123; name: &#39;home&#39; &#125;);
   &#125;,
   loginFailure() &#123;
     alert(&#39;用户名、密码错误，请稍后再试！&#39;);
   &#125;,
 &#125;,
&#125;;
&lt;/script&gt;

</code></pre><p>再运行测试，通过！<br>我们完成了主要功能的测试覆盖，但是 loginSuccess 和 loginFailure 方法并没有测试，原因是这部分调用了 路由，通常不会出错，所以测试的意义不大。<br>当然，如果要测试仍然可以。<br>任务：当执行 loginSuccess 时，路由应为首页，即：’&#x2F;‘。</p><pre><code class="java"> import Vue from &#39;vue&#39;;
import sinon from &#39;sinon&#39;;
import VueRouter from &#39;vue-router&#39;;
import &#123; createLocalVue, mount &#125; from &#39;@vue/test-utils&#39;;
import Login from &#39;@/login/index.vue&#39;;
import Service from &#39;@/login/service&#39;;
import router from &#39;@/router&#39;;

describe(&#39;Login Page&#39;, () =&amp;gt; &#123;
 // ...

 it(&#39;When 执行 loginSuccess()，Then $route.path 为 /&#39;, async () =&amp;gt; &#123;
   const localVue = createLocalVue();
   localVue.use(VueRouter);

   const wrapper = mount(Login, &#123;
     localVue,
     router,
   &#125;);

   wrapper.vm.loginSuccess();
   expect(wrapper.vm.$route.path).toEqual(&#39;/&#39;);
 &#125;);
&#125;);

</code></pre><p>这里需要对默认的 router.js 做改造：</p><pre><code class="java"> - import Vue from &#39;vue&#39;;
import Router from &#39;vue-router&#39;;
import Home from &#39;./views/Home.vue&#39;;

- Vue.use(Router);

export default new Router(&#123;
 mode: &#39;history&#39;,
 base: process.env.BASE_URL,
 routes: [
   &#123;
     path: &#39;/&#39;,
     name: &#39;home&#39;,
     component: Home,
   &#125;,
   &#123;
     path: &#39;/about&#39;,
     name: &#39;about&#39;,
     // route level code-splitting
     // this generates a separate chunk (about.[hash].js) for this route
     // which is lazy-loaded when the route is visited.
     component: () =&amp;gt; import(/* webpackChunkName: &quot;about&quot; */ &#39;./login/index.vue&#39;),
   &#125;,
 ],
&#125;);

</code></pre><p>接着修改 main.js</p><pre><code class="java"> import Vue from &#39;vue&#39;;
+ import Router from &#39;vue-router&#39;;
import App from &#39;./App.vue&#39;;
import router from &#39;./router&#39;;

Vue.config.productionTip = false;
+ Vue.use(Router);

new Vue(&#123;
 router,
 render: h =&amp;gt; h(App),
&#125;).$mount(&#39;#app&#39;);

</code></pre><p>运行测试通过！<br>虽然测试覆盖率不是我们所追求的，但是知道覆盖率是在上升还是在下降可以反应团队在这期间的质量关注度。</p><h5 id="测试覆盖率"><a href="#测试覆盖率" class="headerlink" title="测试覆盖率"></a>测试覆盖率</h5><p>修改配置 jest.config.js 或者 package.json<br>主要关注 &#96;&#96;&#96;java<br>coverage</p><pre><code class="这几个配置的修改："> ```java 
module.exports = &#123;
moduleFileExtensions: [
  &#39;js&#39;,
  &#39;jsx&#39;,
  &#39;json&#39;,
  &#39;vue&#39;,
],
transform: &#123;
  &#39;^.+\\.vue$&#39;: &#39;vue-jest&#39;,
  &#39;.+\\.(css|styl|less|sass|scss|svg|png|jpg|ttf|woff|woff2)$&#39;: &#39;jest-transform-stub&#39;,
  &#39;^.+\\.jsx?$&#39;: &#39;babel-jest&#39;,
&#125;,
transformIgnorePatterns: [
  &#39;/node_modules/&#39;,
  &#39;/node_modules/(?!vue-awesome)&#39;,
],
moduleNameMapper: &#123;
  &#39;^@/(.*)$&#39;: &#39;&lt;rootdir&gt;/src/$1&#39;,
&#125;,
snapshotSerializers: [
  &#39;jest-serializer-vue&#39;,
],
testMatch: [
  &#39;**/tests/unit/**/*.spec.(js|jsx|ts|tsx)|**/__tests__/*.(js|jsx|ts|tsx)&#39;,
],
testURL: &#39;http://localhost/&#39;,
watchPlugins: [
  &#39;jest-watch-typeahead/filename&#39;,
  &#39;jest-watch-typeahead/testname&#39;,
],
+  collectCoverage: true,
+  collectCoverageFrom: [
+    &#39;**/*.&#123;js,vue&#125;&#39;,
+    &#39;!**/node_modules/**&#39;,
+    &#39;!**/App.vue&#39;,
+    &#39;!**/main.js&#39;,
+    &#39;!**/router.js&#39;,
+    &#39;!*.config.js&#39;,
+    &#39;!.eslintrc.js&#39;,
+  ],
+  coverageReporters: [
+    &#39;html&#39;,
+    &#39;text-summary&#39;,
+  ],
+  coveragePathIgnorePatterns: [
+    &#39;&lt;rootdir&gt;/coverage&#39;,
+    &#39;&lt;rootdir&gt;/tests&#39;,
+    &#39;babel.config.js&#39;,
+  ],
&#125;;

</code></pre><p>运行测试：<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"><br>Html 报告：<br><img src="https://tva1.sinaimg.cn/large/006y8mN6ly1g79m0kb3gkj318g0hu7oo.jpg" alt="Test" title="前端如何做测试驱动开��-vue版"><br>点开可以看到每一个文件的覆盖，以及是否有逻辑分支忘记测试。<br>注意：添加测试报告之后运行测试的速度会变慢。</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>经过上面的练习，相信大家能对前端如何做 TDD 有一个基本的掌握。即便不使用 TDD，前端的测试也仍然有意义。当然，相信会有一部分同学会对本文产生质疑，国内写前端测试的人 (或者公司) 都很少，更不要说前端 TDD，这样做很花时间，真的值得吗？写完页面让测试同学点一遍不就可以了？为什么一定要去写这么多代码来去验证呢？<br>本文并不打算去说服你去写测试，以往的工作中没有写过测试，很难通过一篇文章就能让你心动。这如同人们知道健身对自己有好处，但都懒得锻炼。只能采用逼迫方式，让自己动起来，直到有一天发现自己精神饱满、身材健硕，还能 1 个打 8 个👊，这时才能体会到健身给自己带来的好处。TDD 亦是如此，唯有不断的练习，让行为改变思维，在这个过程中发现它的价值，胜过无数的文章。</p><h4 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h4><p><a target="_blank" rel="external nofollow noopener noreferrer" href="https://www.agilealliance.org/glossary/atdd/">https://www.agilealliance.org/glossary/atdd/</a><br>《测试驱动开发的艺术》</p><div class="post-copyright"><div class="content"><p>本文标题： 推荐系列-前端如何做测试驱动开发-vue版</p><p>本文作者： OSChina</p><p>发布时间： 2021年04月15日 09:19</p><p>最后更新： 2022年06月22日 17:35</p><p>原始链接： <a class="post-url" href="/b549d477/" title="推荐系列-前端如何做测试驱动开发-vue版">https://www.hosiang.cn/b549d477/</a></p><p>版权声明： 本文著作权归作者所有，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 4.0</a>许可协议，转载请注明出处！</p><footer><a href="https://www.hosiang.cn"><img src="/../images/logo.png" alt="Howe Hsiang"> Howe Hsiang</a></footer></div></div><div class="page-reward"><a id="rewardBtn" href="javascript:;">赏</a></div><div id="reward" class="post-modal reward-lay"><a class="close" href="javascript:;" id="reward-close">×</a> <span class="reward-title"><i class="icon icon-quote-left"></i> 喜欢就赞赏一下呗！ <i class="icon icon-quote-right"></i></span><div class="reward-content"><div class="reward-code"><img id="rewardCode" src="/images/threepay_code.jpg" alt="打赏二维码"></div><div class="reward-select"></div></div></div></div><footer class="article-footer"><div class="post-share"><a href="javascript:" id="share-sub" class="post-share-fab"><i class="fa fa-share-alt" style="padding-top:11px!important"></i></a><div class="post-share-list" id="share-list"><ul class="share-icons"><li><a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://www.hosiang.cn/b549d477/" data-title="Facebook" rel="external nofollow noopener noreferrer"><i class="fa fa-facebook" style="padding-top:9px!important"></i></a></li><li><a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《推荐系列-前端如何做测试驱动开发-vue版》 — 狂欢马克思&url=https://www.hosiang.cn/b549d477/&via=https://www.hosiang.cn" data-title="Twitter" rel="external nofollow noopener noreferrer"><i class="fa fa-twitter" style="padding-top:9px!important"></i></a></li><li><a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://www.hosiang.cn/b549d477/" data-title="Google+" rel="external nofollow noopener noreferrer"><i class="fa fa-google-plus" style="padding-top:9px!important"></i></a></li><li><a class="qq share-sns" target="_blank" href="https://connect.qq.com/widget/shareqq/index.html?url=https://www.hosiang.cn/b549d477/&title=《推荐系列-前端如何做测试驱动开发-vue版》 — 狂欢马克思&source=&amp;emsp;&amp;emsp;最近和测试杠上了，写了的文章都和测试相关。当然，这里的「测试」并不是具体的某个角色，而是验证程序正确性的工作。曾经..." data-title="QQ" rel="external nofollow noopener noreferrer"><i class="fa fa-qq" style="padding-top:9px!important"></i></a></li><li><a class="weixin share-sns" id="wxFab" href="javascript:" data-title="微信"><i class="fa fa-weixin" style="padding-top:9px!important"></i></a></li><li><a class="weibo share-sns" target="_blank" href="https://service.weibo.com/share/share.php?url=https://www.hosiang.cn/b549d477/&title=《推荐系列-前端如何做测试驱动开发-vue版》 — 狂欢马克思&pic=https://static.oschina.net/uploads/img/201910/31104612_dVoo.jpg" data-title="微博" rel="external nofollow noopener noreferrer"><i class="fa fa-weibo" style="padding-top:9px!important"></i></a></li></ul></div></div><div class="post-modal wx-share" id="wxShare"><a class="close" href="javascript:" id="wxShare-close">×</a><p>扫一扫，分享到微信</p><img src="//api.qrserver.com/v1/create-qr-code/?data=https://www.hosiang.cn/b549d477/" alt="微信分享二维码"></div><div class="mask"></div><ul class="article-footer-menu"><li class="article-footer-tags"><i class="fa fa-tags"></i> <a href="/tags/Popular/" class="color3">Popular</a></li></ul></footer></div></article><aside class="post-toc-pos post-toc-top" id="post-toc"><nav class="post-toc-wrap"><ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E7%90%86%E8%AE%BA%E7%AF%87"><span class="post-toc-text">理论篇</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#TDD-%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="post-toc-text">TDD 的步骤</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#TDD-%E7%9A%84%E4%B8%89%E5%8E%9F%E5%88%99"><span class="post-toc-text">TDD 的三原则</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E9%AA%8C%E6%94%B6%E9%A9%B1%E5%8A%A8%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E2%80%94%E2%80%94ATDD-Acceptance-Test-Driven-Development"><span class="post-toc-text">验收驱动测试开发——ATDD(Acceptance Test Driven Development)</span></a></li></ol></li></ol><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E5%AE%9E%E8%B7%B5%E7%AF%87"><span class="post-toc-text">实践篇</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83"><span class="post-toc-text">安装环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83"><span class="post-toc-text">验证环境</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-6"><a class="post-toc-link" href="#%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95"><span class="post-toc-text">编写测试</span></a></li></ol></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#%E6%B5%8B%E8%AF%95%E8%A6%86%E7%9B%96%E7%8E%87"><span class="post-toc-text">测试覆盖率</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E6%80%BB%E7%BB%93"><span class="post-toc-text">总结</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#%E8%B5%84%E6%96%99"><span class="post-toc-text">资料</span></a></li></ol></li></nav></aside><nav id="article-nav"><a href="/8eb96f49/" id="article-nav-newer" class="article-nav-link-wrap"><span class="article-nav-title"><i class="fa fa-hand-o-left" aria-hidden="true"></i> 推荐系列-前端 Docker 镜像体积优化 </span></a><a href="/46da75db/" id="article-nav-older" class="article-nav-link-wrap"><span class="article-nav-title">推荐系列-动手实现 LRU 算法，以及 Caffeine 和 Redis 中的缓存淘汰策略</span> <i class="fa fa-hand-o-right" aria-hidden="true"></i></a></nav><div id="gitalk"></div><link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css"><script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script><script>var gitalk=new Gitalk({repo:"bolg-comment",owner:"Hosiang1026",admin:"Hosiang1026",clientID:"37a2dd4473e8970cecc2",clientSecret:"e30efa17d86d9de4f4ab810872dc62a7b2e7e634",pagerDirection:"last",distractionFreeMode:!0,createIssueManually:!1});gitalk.render("gitalk")</script></section></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner"><script id="_wau78w">var _wau=_wau||[];_wau.push(["small","5dnguv4c2n","78w"])</script><script async src="//waust.at/s.js"></script><p><span id="busuanzi_container_site_uv" style="display:none"><span class="post-count">总字数：<span>1777.3k</span> </span>总访客数：<span id="busuanzi_value_site_uv"></span> </span><span id="busuanzi_container_site_pv" style="display:none">总访问量：<span id="busuanzi_value_site_pv"></span></span><br><span id="TimeShow">本站</span><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><br>Copyright&copy; 2018 - 2022 狂欢马克思 <a href="https://beian.miit.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">京ICP备17060439号</a></p></div></div><script>var now=new Date;function createtime(){var n=new Date("2017/09/18");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="安全运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",800)</script></footer><script>var mihoConfig={root:"https://www.hosiang.cn",animate:"true",isHome:"false",share:"true",reward:" 1"}</script><div class="sidebar"><div id="sidebar-search" title="Search"><i class="fa fa-search"></i></div><div id="sidebar-category" title="Categories"><i class="fa fa-book"></i></div><div id="sidebar-tag" title="Tags"><i class="fa fa-tags"></i></div><div id="sidebar-top"><span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span></div></div><div class="sidebar-menu-box" id="sidebar-menu-box"><div class="sidebar-menu-box-container"><div id="sidebar-menu-box-categories"><a class="category-link" href="/categories/%E5%85%B4%E8%B6%A3%E7%88%B1%E5%A5%BD/">兴趣爱好</a><a class="category-link" href="/categories/%E5%85%B6%E4%BB%96%E5%BC%80%E5%8F%91/">其他开发</a><a class="category-link" href="/categories/%E5%89%8D%E6%B2%BF%E5%BC%80%E5%8F%91/">前沿开发</a><a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a><a class="category-link" href="/categories/%E5%8D%87%E7%BA%A7%E7%89%88%E6%9C%AC/">升级版本</a><a class="category-link" href="/categories/%E5%8D%9A%E5%AE%A2%E6%95%99%E7%A8%8B/">博客教程</a><a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/">后端开发</a><a class="category-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><a class="category-link" href="/categories/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/">日常记录</a><a class="category-link" href="/categories/%E7%83%AD%E9%97%A8%E6%96%87%E7%AB%A0/">热门文章</a></div><div id="sidebar-menu-box-tags"><a href="/tags/Ajax/" style="font-size:10px">Ajax</a> <a href="/tags/AliGenie/" style="font-size:10px">AliGenie</a> <a href="/tags/Alipay/" style="font-size:10px">Alipay</a> <a href="/tags/Android/" style="font-size:10px">Android</a> <a href="/tags/Blockchain/" style="font-size:17.5px">Blockchain</a> <a href="/tags/CQRS/" style="font-size:10px">CQRS</a> <a href="/tags/Database/" style="font-size:15px">Database</a> <a href="/tags/Docker/" style="font-size:10px">Docker</a> <a href="/tags/EasyUI/" style="font-size:10px">EasyUI</a> <a href="/tags/Guitar/" style="font-size:10px">Guitar</a> <a href="/tags/Hackintosh/" style="font-size:12.5px">Hackintosh</a> <a href="/tags/Hexo/" style="font-size:15px">Hexo</a> <a href="/tags/IntelliJ-IDEA/" style="font-size:10px">IntelliJ IDEA</a> <a href="/tags/Java/" style="font-size:12.5px">Java</a> <a href="/tags/Kali-Linux/" style="font-size:10px">Kali Linux</a> <a href="/tags/Life/" style="font-size:17.5px">Life</a> <a href="/tags/Mac-OS/" style="font-size:12.5px">Mac OS</a> <a href="/tags/MultiThread/" style="font-size:10px">MultiThread</a> <a href="/tags/NodeJS/" style="font-size:10px">NodeJS</a> <a href="/tags/Popular/" style="font-size:20px">Popular</a> <a href="/tags/Python/" style="font-size:10px">Python</a> <a href="/tags/SaaS/" style="font-size:10px">SaaS</a> <a href="/tags/Servlet/" style="font-size:10px">Servlet</a> <a href="/tags/Spring/" style="font-size:17.5px">Spring</a> <a href="/tags/Upgrade/" style="font-size:10px">Upgrade</a> <a href="/tags/Web/" style="font-size:10px">Web</a> <a href="/tags/Windows/" style="font-size:10px">Windows</a> <a href="/tags/Work/" style="font-size:10px">Work</a> <a href="/tags/iOS/" style="font-size:10px">iOS</a></div></div><a href="javascript:" class="sidebar-menu-box-close">&times;</a></div><div class="mobile-header-menu-nav" id="mobile-header-menu-nav"><div class="mobile-header-menu-container"><span class="title">导航</span><ul class="mobile-header-menu-navbar"><li><a href="/"><i class="fa fa-home"></i><span>主页</span></a></li><li><a href="/archives"><i class="fa fa-archive"></i><span>归档</span></a></li><li><a href="/gitbook"><i class="fa fa-columns"></i><span>笔记</span></a></li><li><a href="/music"><i class="fa fa-music"></i><span>音乐</span></a></li><li><a href="/photo"><i class="fa fa-picture-o"></i><span>相册</span></a></li><li><a href="/love"><i class="fa fa-heart"></i><span>恋爱</span></a></li><li><a href="/collection"><i class="fa fa-envira"></i><span>收藏</span></a></li><li><a href="/about"><i class="fa fa-user"></i><span>关于</span></a></li></ul></div><div class="mobile-header-tag-container"><span class="title">标签</span><div id="mobile-header-container-tags"><a href="/tags/Ajax/" style="font-size:10px">Ajax</a> <a href="/tags/AliGenie/" style="font-size:10px">AliGenie</a> <a href="/tags/Alipay/" style="font-size:10px">Alipay</a> <a href="/tags/Android/" style="font-size:10px">Android</a> <a href="/tags/Blockchain/" style="font-size:17.5px">Blockchain</a> <a href="/tags/CQRS/" style="font-size:10px">CQRS</a> <a href="/tags/Database/" style="font-size:15px">Database</a> <a href="/tags/Docker/" style="font-size:10px">Docker</a> <a href="/tags/EasyUI/" style="font-size:10px">EasyUI</a> <a href="/tags/Guitar/" style="font-size:10px">Guitar</a> <a href="/tags/Hackintosh/" style="font-size:12.5px">Hackintosh</a> <a href="/tags/Hexo/" style="font-size:15px">Hexo</a> <a href="/tags/IntelliJ-IDEA/" style="font-size:10px">IntelliJ IDEA</a> <a href="/tags/Java/" style="font-size:12.5px">Java</a> <a href="/tags/Kali-Linux/" style="font-size:10px">Kali Linux</a> <a href="/tags/Life/" style="font-size:17.5px">Life</a> <a href="/tags/Mac-OS/" style="font-size:12.5px">Mac OS</a> <a href="/tags/MultiThread/" style="font-size:10px">MultiThread</a> <a href="/tags/NodeJS/" style="font-size:10px">NodeJS</a> <a href="/tags/Popular/" style="font-size:20px">Popular</a> <a href="/tags/Python/" style="font-size:10px">Python</a> <a href="/tags/SaaS/" style="font-size:10px">SaaS</a> <a href="/tags/Servlet/" style="font-size:10px">Servlet</a> <a href="/tags/Spring/" style="font-size:17.5px">Spring</a> <a href="/tags/Upgrade/" style="font-size:10px">Upgrade</a> <a href="/tags/Web/" style="font-size:10px">Web</a> <a href="/tags/Windows/" style="font-size:10px">Windows</a> <a href="/tags/Work/" style="font-size:10px">Work</a> <a href="/tags/iOS/" style="font-size:10px">iOS</a></div></div></div><div class="search-wrap"><span class="search-close">&times;</span> <a href="javascript:" class="header-icon waves-effect waves-circle waves-light" id="back"><i class="icon icon-lg icon-chevron-left"></i> </a><input class="search-field" placeholder="Search..." id="keywords"> <a id="search-submit" href="javascript:"><i class="fa fa-search"></i></a><div class="search-container" id="search-container"><ul class="search-result" id="search-result"></ul></div></div><div id="search-tpl"><li class="search-result-item"><a href="{url}" class="search-item-li"><span class="search-item-li-title" title="{title}">{title}</span></a></li></div><script src="/js/search.js"></script><script src="/js/main.js"></script><script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script><div id="particles"></div><script src="/js/particles.js"></script><link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css"><script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script><script src="/js/animate.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"right",width:150,height:300},mobile:{show:!0,scale:.5},log:!1})</script></body></html>