var voiceflag=true;var songflag=true;var fesflag=true;var calendars;var date;var syear;var smouth;var sday;var nowTime;var biryear;var brithMD;var festivalName="";var festivalDate="";var festivalNameSpecial="";var festivalDateSpecial="";var festivalTimeSpecial=0;var festivalNameTerm="";var festivalDateTerm="";var festivalTimeTerm=0;var festivalNameSFtv="";var festivalDateSFtv="";var festivalTimeSFtv=0;var festivalNameLFtv="";var festivalDateLFtv="";var festivalTimeLFtv=0;var special=["05/2-7*母亲节","06/3-7*父亲节","11/4-4*感恩节"];var solarTerm=["01*小寒","01*大寒","02*立春","02*雨水","03*惊蛰","03*春分","04*清明(法定节假日)","04*谷雨","05*立夏","05*小满","06*芒种","06*夏至","07*小暑","07*大暑","08*立秋","08*处暑","09*白露","09*秋分","10*寒露","10*霜降","11*立冬","11*小雪","12*大雪","12*冬至"];var lFtv=["01/01*春节(法定节假日)","01/12*老妈的生日|1972","01/15*上元节","02/02*龙头节","02/14*老爸的生日|1970","04/04*寒食节","04/08*佛诞节","05/05*端午节(法定节假日)","07/07*七夕节","07/15*中元节","08/15*中秋节(法定节假日)","09/09*重阳节","09/18*祥祥同学的生日|1992","10/01*七七同学的生日|1995","10/15*下元节","12/08*腊八节","12/23*小年(北方地区)","12/24*小年(南方大部分地区)","12/28*订婚纪念日","12/29*小年(江浙沪地区)","12/30*除夕(法定节假日)"];var sFtv=["01/01*元旦(法定节假日)","02/14*情人节","03/08*妇女节","03/12*植树节","03/15*消费者权益日","04/01*愚人节","05/01*劳动节(法定节假日)","05/04*青年节","05/12*护士节","05/20*网络情人节","06/01*儿童节","07/01*建党节(1921.07.23)|香港回归纪念日(1997.07.01)","07/14*领证纪念日","08/01*建军节(1927.08.01)","09/03*抗战胜利纪念日(1945.09.03)","09/10*教师节","09/18*九一八事变纪念日(1931.09.18)","10/01*国庆节(法定节假日)","10/24*1024程序员节","11/01*万圣节","11/11*网络单身节","12/13*国家公祭日","12/20*澳门回归纪念日(1999.12.20)","12/24*平安夜","12/25*圣诞节"];var birthdayArr=["正月十二","二月十四","九月十八","十月初一"];var springFestivalArr=["腊月廿三","腊月廿四","腊月廿五","腊月廿六","腊月廿七","腊月廿八","腊月廿九","腊月三十","正月初一","正月初二","正月初三"];var nationalDayArr=["10月01日","10月02日","10月03日","10月04日","10月05日","10月06日","10月07日"];var bannerNum=-1;var springFestivalBannerArr=["/photo/album/system/system_003.jpg","/photo/album/system/system_004.jpg","/photo/album/system/system_005.jpg"];var nationalFestivalBannerArr=["/photo/album/system/system_006.gif","/photo/album/system/system_007.gif"];function getFestival(){calendars=showCal();date=getCurrentDateTime();syear=date.substr(0,date.indexOf("年"));smouth=date.substr(date.indexOf("年")+1,date.indexOf("月")-5);sday=date.substr(date.indexOf("月")+1,date.indexOf("日")-8);var e=syear+"/"+smouth+"/"+sday;nowTime=new Date(e).getTime();ergodicsSpecialArr(special,(parseInt(syear)-1).toString());ergodicsSolarTermArr(solarTerm,(parseInt(syear)-1).toString());ergodicsLFtvArr(lFtv,(parseInt(syear)-1).toString());ergodicsSFtvArr(sFtv,syear);getMinFestival()}function ergodicsSolarTermArr(e,a){for(var t=0,i=e.length;t<i;t++){var s=e[t];var r=t+1;var n=s.substr(0,s.indexOf("*"));n=n.replace("*","");var l="";var v=0;var o=parseInt(r);if(o<3){v=22+o}else{v=o-2}if(""!=v){l="第"+v+"个节气-"}var f=l+s.substr(s.indexOf("*")+1,s.length);var m=conversionTerm(a,n,r);var c=new Date(m).getTime();if(nowTime==c||nowTime<c){festivalNameTerm=f;festivalDateTerm=m;festivalTimeTerm=c;break}else{if(t==i-1){var g=(parseInt(a)+1).toString();ergodicsSolarTermArr(e,g)}}}}function ergodicsLFtvArr(e,a){for(var t=0,i=e.length;t<i;t++){var s=e[t];var r=s.substr(s.indexOf("*")+1,s.length);if(-1!=r.indexOf("生日")){biryear=s.substr(s.indexOf("|")+1,s.length);r=s.substr(s.indexOf("*")+1,s.indexOf("|")-6)}brithMD=s.substr(0,s.indexOf("*"));var n=a+"/"+brithMD;var l=conversion(n);var v=new Date(l).getTime();if(nowTime==v||nowTime<v){festivalNameLFtv=r;festivalDateLFtv=l;festivalTimeLFtv=v;break}else{if(t==i-1){var o=(parseInt(a)+1).toString();ergodicsLFtvArr(e,o)}}}}function ergodicsSFtvArr(e,a){for(var t=0,i=e.length;t<i;t++){var s=e[t];var r=s.substr(s.indexOf("*")+1,s.length);var n=a+"/"+s.substr(0,s.indexOf("*"));var l=new Date(n).getTime();if(nowTime==l||nowTime<l){festivalNameSFtv=r;festivalDateSFtv=n;festivalTimeSFtv=l;break}else{if(t==i-1){var v=(parseInt(a)+1).toString();ergodicsSFtvArr(e,v)}}}}function ergodicsSpecialArr(e,a){for(var t=0,i=e.length;t<i;t++){var s=e[t];var r=s.substr(0,s.indexOf("/"));if(null==o){continue}var n=s.substr(s.indexOf("/")+1,s.indexOf("-")-3);var l=s.substr(s.indexOf("-")+1,s.indexOf("*")-5);var v=s.substr(s.indexOf("*")+1,s.length);var o=conversionParentDate(a,r,n,l);var f=new Date(o).getTime();if(nowTime==f||nowTime<f){festivalNameSpecial=v;festivalDateSpecial=o;festivalTimeSpecial=f;break}if(t==i-1){var m=(parseInt(a)+1).toString();ergodicsSpecialArr(e,m)}}}function getMinFestival(){var e;if(festivalTimeSpecial==0){e=[festivalTimeTerm,festivalTimeSFtv,festivalTimeLFtv]}else{e=[festivalTimeSpecial,festivalTimeTerm,festivalTimeSFtv,festivalTimeLFtv]}var a=Math.min.apply(Math,e);assigFestival(a,festivalNameSpecial,festivalDateSpecial,festivalTimeSpecial);assigFestival(a,festivalNameTerm,festivalDateTerm,festivalTimeTerm);assigFestival(a,festivalNameSFtv,festivalDateSFtv,festivalTimeSFtv);assigFestival(a,festivalNameLFtv,festivalDateLFtv,festivalTimeLFtv)}function assigFestival(e,a,t,i){if(e==i&&-1==festivalName.indexOf(a)){festivalDate=t;festivalName=festivalName+" | "+a;if(festivalName.startsWith(" | ")){var s=" | ".length;festivalName=festivalName.substr(s)}}}function showTime(){var e="";var a="";var t=(new Date).getTime();var i=(new Date).setHours(0,0,0,0);var s=(new Date).setHours(0,0,0,1);if(t>=i&&t<=s){$("#timer").html("");$("#msg").html("");getFestival()}if(""!=festivalDate){var r=new Date(festivalDate).getTime();var n=r-t;var l=Math.floor(n/(24*60*60*1e3));var v=Math.floor((n-l*24*60*60*1e3)/(60*60*1e3));var o=Math.floor((n-l*24*60*60*1e3-v*60*60*1e3)/(60*1e3));var f=Math.floor((n-l*24*60*60*1e3-v*60*60*1e3-o*60*1e3)/1e3);if(n>-86399e3&&n<=0){if(-1!=festivalName.indexOf("(法定节假日)")){festivalName=festivalName.replace("(法定节假日)","")}if(fesflag){fesflag=false;if(-1!=festivalName.indexOf("生日")){var m=biryear+"/"+brithMD;var c=conversionAstro(m);festivalName=festivalName+"-"+c+"，"+"愿：时光能缓、美好如初、生日快乐"}if("国庆节"==festivalName){var g="(建国"+(parseInt(syear)-1949)+"周年)";festivalName=festivalName+g+"，愿：繁荣昌盛、国泰民安、喜乐安宁"}if("元旦"==festivalName){festivalName=syear+"年"+festivalName+"，"+"元旦快乐、岁岁平安"}if("除夕"==festivalName||"春节"==festivalName){var h=conversionLunar(syear);festivalName=h+"-"+syear+festivalName+"，"+"新春快乐、大吉大利"}if(""!=festivalName){a="今天是"+festivalName+"！";$("#timer").html(e);$("#msg").html(a);$("#weekend").html("")}}}else{if(""!=festivalName){a="距离"+festivalName+"，还有";e=l+"天"+v+"时"+o+"分"+f+"秒！";$("#timer").html(e);$("#msg").html(a)}}if(voiceflag){var u=window.location.href;if($.cookie("auto_playre")==null||$.cookie("auto_playre")==="yes"){if(u=="https://www.hosiang.cn/"||u=="https://www.hosiang.cn"||u=="https://blog.hosiang.cn/"||u=="https://blog.hosiang.cn"){speechVoice()}else{voiceflag=false}}}songlistArr()}}setInterval("showTime()",1e3);function speechVoice(){if(undefined!=$("#noticeMar")[0]){var e=$("#noticeMar")[0].innerText;if(e!=""){if("speechSynthesis"in window){baiduVoice(e);voiceflag=false}}}}function htmlVoice(e){var a=new SpeechSynthesisUtterance;a.lang=="zh-CN";a.rate=1;a.pitch=3;a.text=e;window.speechSynthesis.speak(a)}function baiduVoice(e){var a="https://tts.baidu.com/text2audio?";var t=[];t.push("lan=zh");t.push("pdt=301");t.push("vol=8");t.push("per=0");t.push("cuid=baike");t.push("ctp=1");t.push("tex="+encodeURIComponent(e));var i=a+t.join("&");var s=new Audio;s.autoplay=true;s.preload=true;s.controls=false;s.src=i;s.loop=false;s.volume=1}function palyAudio(){var a=audioArr();var t=new Audio;t.preload=true;t.controls=false;var e=Math.floor(Math.random()*a.length);t.src=a[e];try{t.play()}catch(e){}if(a.length==1){t.loop=true}else{t.loop=false;a.splice(e,1);t.addEventListener("ended",i,false)}function i(){var e=Math.floor(Math.random()*a.length);t.src=a[e];try{t.play()}catch(e){}a.splice(e,1);if(a.length==0){a=audioArr()}}}function songlistArr(){var e=showCal();var a=getCurrentDateTime();if(-1!=birthdayArr.indexOf(e)){$("#banner").css("background-image","url(/photo/album/system/system_002.jpg)");getFestivalSongList("birthdaySongList")}if(-1!=springFestivalArr.indexOf(e)){getFestivalSongList("festivalSongList");if(bannerNum==-1){bannerNum=Math.floor(Math.random()*springFestivalBannerArr.length)}$("#banner").css("background-image","url("+springFestivalBannerArr[bannerNum]+")")}if(-1!=nationalDayArr.indexOf(a.substr(a.indexOf("年")+1,a.indexOf("日")-4))){getFestivalSongList("nationalSongList");if(bannerNum==-1){bannerNum=Math.floor(Math.random()*nationalFestivalBannerArr.length)}$("#banner").css("background-image","url("+nationalFestivalBannerArr[bannerNum]+")")}}var songSheetList=[];function getFestivalSongList(e){if(songflag){var a=$.ajax({url:"/"+e+".json",async:false});if(undefined!=a){var t=a.responseJSON;fesSongList=t[0];if(songSheetList.length>0){songSheetList.splice(0,0,fesSongList)}songflag=false}else{lzxTips.show("歌曲列表获取失败!")}}}function getYQData(){$.ajax({method:"get",async:false,url:"https://service-qzyqjgtg-1254466492.gz.apigw.tencentcs.com/release/DxyData",success:function(e){if(e.error==0){$("#YQData").html(e.data)}}})}function getHitokoto(){$.ajax({method:"get",async:false,url:"https://service-4bm8avhm-1254466492.gz.apigw.tencentcs.com/release/hitokoto",success:function(e){var a=e.hitokoto;if(null!=a){a=a+" - ";var t=e.from_who;if(null!=t){a=a+t}var i=e.from;if(null!=i){a=a+"《"+i+"》"}$("#hitokoto").html(a)}}})}function getWYComments(){$.ajax({method:"get",async:false,url:"https://service-o9klo0gw-1254466492.gz.apigw.tencentcs.com/release/comments",success:function(e){if(e.code==1){var a=e.data.name;var t=e.data.artistsname;var i=e.data.content;$("#wycomments").html(i+" - "+t+"《"+a+"》")}}})}function getWeekend(){$.ajax({method:"get",async:false,url:"https://service-gd5gvcli-1254466492.gz.apigw.tencentcs.com/release/holiday",success:function(e){if(e.length>0){if(e[0].code==2){$("#weekend").html("今天是周末，忙碌了一周的您可以稍稍休息一下啦！")}}}})}