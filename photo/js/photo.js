var that=this;var current=1;var size=8;var flag=true;var passFlag=true;var datas;var photosData;var host="https://haoxiang.eu.org";var lockUrl=host+"/images/album_lock.jpg";$.getJSON(host+"/photo/album/photo.json",function(t){datas=t;that.render(t,current)});$("#firstPage").click(function(){if(flag){that.render(datas,parseInt(1))}else{getPhotoList(photosData,parseInt(1))}});$("#prePage").click(function(){var t=$("#pages").text();current=$("#current").text();nextCurrent=parseInt(current)-1;if(nextCurrent>0&&nextCurrent<=t){if(flag){that.render(datas,nextCurrent)}else{getPhotoList(photosData,nextCurrent)}}});$("#nextPage").click(function(){var t=$("#pages").text();current=$("#current").text();var e=parseInt(current)+1;if(e>0&&e<=t){if(flag){that.render(datas,e)}else{getPhotoList(photosData,e)}}});$("#lastPage").click(function(){var t=$("#pages").text();if(flag){that.render(datas,parseInt(t))}else{getPhotoList(photosData,parseInt(t))}});$("#jumpPage").click(function(){var t=$("#jumpWhere").val();if(flag){that.render(datas,parseInt(t))}else{getPhotoList(photosData,parseInt(t))}});function openAlbum(t){var e=$("#passwordId"+t).val();if(e!=""){verifyPassword(e)}else{passFlag=true}if(passFlag){$("#albumList").hide();$("#test").show();$("#returnAlbum").show();flag=false;var a=$("#albumId"+t).val();photosData=datas[a].photos;getPhotoList(photosData,current)}}function verifyPassword(t){passFlag=false;var e=getAES(prompt("此相册已被加密，需要输入密码访问")).toString();if(e!==t){alert("抱歉，密码错误, 您没有权限访问！")}else{passFlag=true}}$("#returnAlbum").click(function(){$("#test").hide();$("#albumList").show();$("#returnAlbum").hide();flag=true;that.render(datas,current)});var render=function(t,e){var a=t.length;if(flag){setPage(a,e)}$("#albumList").empty();var r=e*size-size;var s=e*size;if(s>a){s=a}for(var i=r;i<s;i++){var o=t[i].sort;var n=t[i].name;var l=t[i].password;var p=t[i].photos;var d=p[0].thumbnail;var g=host+d;if(l!=""){g=lockUrl}var u='<div class="iso-box design col-6 col-sm-4 col-md-4 col-lg-3 col-xl-3" >'+'<div style="background: rgba(204,204,204,0.8); width: 300px; height: 218px;"> '+'<div><input id="albumId'+o+'" value="'+o+'" type="hidden" />'+'<input id="passwordId'+o+'" value="'+l+'" type="hidden" />'+'<img  id = "'+o+'" onclick="openAlbum(this.id)" src="'+g+'" alt="Image" class="img-fluid" style="padding-top: 6px;margin-left: 6px; width: 280.5px; height: 210.5px;"></div> '+" </div>"+'<div align="center"><p>'+n+"</p></div>\n"+"</div>";$("#albumList").append(u);if(!flag){getPhotoList(p,e)}}};function getPhotoList(t,e){var a=t.length;setPage(a,e);$("#test").empty();for(var r=e*size-size;r<e*size;r++){var s=t[r].name;var i=host+t[r].thumbnail;var o='<div class="iso-box design col-6 col-sm-4 col-md-4 col-lg-3 col-xl-3" >'+'<a href= "'+i+'"><img src="'+i+'" alt="Image" class="img-fluid" style="padding-top: 6px;margin-left: 6px; width: 280.5px; height: 210.5px;"></a> '+'<div align="center"><p>'+s+"</p></div>\n"+"</div>";$("#test").append(o)}}function setPage(t,e){var a=Math.ceil(t/size);if(e<=0){e=1}if(e>a){$("#current").text(a)}else{$("#current").text(e)}$("#pages").text(a);$("#total").text(t);$("#test").empty();$("#jumpWhere").empty();for(var r=e-1;r<a;r++){$("<option value="+parseInt(r+1)+">"+parseInt(r+1)+"</option>").appendTo("#jumpWhere")}}