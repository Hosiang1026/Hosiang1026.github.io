var autoPlayer=1,randomPlayer=1,defaultVolume=75,showLrc=1,greeting="欢迎访问狂欢马克思！",showGreeting=1,defaultAlbum=1,background=1,playerWidth=275,coverWidth=90,showNotes=1,autoPopupPlayer=-1;var mainColor="89,88,137";var font_color="0,0,0";var songDemoList=[{albumCovers:["/images/player_cover.jpg"],albumNames:["Seve"],artistNames:["Tez Cadey"],author:"狂欢马克思",songIds:["30394891"],songNames:["Seve"],songSheetName:"默认歌单",songTypes:["wy"]}];var songSheetList=[];var lzxPlayerInit=function(){var e=false;var a=true;var s="8d38ed8b82974702820c79908b9db4b9";var t=typeof lzxPlayerStyleLoaded!=="undefined"&&lzxPlayerStyleLoaded;if(navigator.userAgent.match(/(iPhone|iPod|Android|ios|Nokia|Black Berry|MIDP|Phone)/i)){e=true}if(!a){var i=localStorage.getItem("isLoad");var o=localStorage.getItem("lastFeed");i=typeof i==="undefined"?false:i==="true";i=i&&typeof o!=="undefined"&&(new Date).getTime()-parseInt(o)<2e3;if(top.location!==self.location||i){return}localStorage.setItem("isLoad","true")}if(a&&s==null){return}var E=$("#ilt").attr("src");var l="https://player.ilt.me";var X=a?s:$("#ilt").attr("key");if(!t){$("head").append('<link rel="stylesheet" type="text/css" href="'+l+'/player/css/player.css">');$("head").append('<link href="https://libs.baidu.com/fontawesome/4.2.0/css/font-awesome.css" rel="stylesheet" type="text/css">');lzxPlayerStyleLoaded=true}$("body").append('<div id="lzxPlayer" style="bottom: 120px;">\n'+'    <div class="player">\n'+'        <canvas class="blur-img" width="365" height="155" id="canvas">您的浏览器不支持canvas，请更换高级版的浏览器！</canvas>\n'+'        <div class="blur-img">\n'+'            <img src="#" class="blur" style="top: 0; display: inline;"></div>\n'+'        <div class="infos">\n'+'            <div class="songstyle">\n'+"                <span>\n"+'                    <i class="fa fa-music"></i>\n'+'                    <span class="song"></span>\n'+"                </span>\n"+'                <span style="float: right;">\n'+'                    <i class="fa fa-clock-o"></i>\n'+'                    <span class="time">00:00 / 00:00</span></span>\n'+"            </div>\n"+'            <div class="artiststyle">\n'+'                <i class="fa fa-user"></i>\n'+'                <span class="artist"></span>\n'+'                <span class="moshi">\n'+'                    <i class="loop fa fa-random current"></i> 随机播放</span>\n'+"            </div>\n"+'            <div class="artiststyle">\n'+'                <i class="fa fa-folder"></i>\n'+'                <span class="artist1"></span>\n'+'                <span class="geci"></span>\n'+"            </div>\n"+"        </div>\n"+'        <div class="control">\n'+'            <span style="float:left">\n'+'                <i class="loop fa fa-retweet" title="顺序播放"></i>\n'+'                <i class="prev fa fa-backward" title="上一首"></i>\n'+"            </span>\n"+'            <span style="float:right">\n'+'                <i class="next fa fa-forward" title="下一首"></i>\n'+'                <i class="random fa fa-random current" title="随机播放"></i>\n'+"            </span>\n"+"        </div>\n"+'        <div class="status">\n'+"            <b>\n"+'                <i class="play fa fa-play" title="播放"></i>\n'+'                <i class="pause fa fa-pause" title="暂停"></i>\n'+"            </b>\n"+'            <div id="div1" class="note">\n'+'                <i class="fa fa-music" aria-hidden="true"></i>\n'+"            </div>\n"+'            <div id="div2" class="note">\n'+'                <i class="fa fa-music" aria-hidden="true"></i>\n'+"            </div>\n"+'            <div id="div3" class="note">\n'+'                <i class="fa fa-music" aria-hidden="true"></i>\n'+"            </div>\n"+"        </div>\n"+'        <div class="musicbottom">\n'+'            <div class="rate" style=" margin-top: 10px;">\n'+'                <div class="progress">\n'+'                    <div class="rate-buffered"></div>'+'                    <div class="rate-on" style="width: 0;">\n'+'                        <div class="drag"></div>\n'+"                    </div>\n"+"                </div>\n"+"            </div>\n"+'            <div class="icons" style=" margin-top: 5px;">\n'+'                <div class="switch-playlist">\n'+'                    <i class="fa fa-bars" title="播放列表"></i>\n'+"                </div>\n"+'                <div class="switch-ksclrc">\n'+'                    <i class="fa fa-toggle-on" title="关闭歌词"></i>\n'+"                </div>\n"+'                <div class="switch-down">\n'+'                    <a class="down">\n'+'                        <i class="fa fa-cloud-download" title="歌曲下载"></i>\n'+"                    </a>\n"+"                </div>\n"+'                <div class="new-volume">\n'+'                    <i class="volumeup fa fa-volume-up" title="音量"></i>\n'+'                    <div class="volume-controls" style="">\n'+'                        <div class="slider" data-direction="vertical">\n'+'                            <div class="progress2" style="height: 66%;">\n'+'                                <div class="drag" id="volume-drag"></div>\n'+"                            </div>\n"+"                        </div>\n"+"                    </div>\n"+"                </div>\n"+"            </div>\n"+"        </div>\n"+'        <div class="cover"></div>\n'+"    </div>\n"+'    <div class="playlist">\n'+'        <div class="playlist-bd">\n'+'            <div class="album-list">\n'+'                <div class="musicheader"></div>\n'+'                <div class="list"></div>\n'+"            </div>\n"+'            <div class="song-list">\n'+'                <div class="musicheader">\n'+'                    <i class="fa fa-angle-right"></i>\n'+"                    <span></span>\n"+"                </div>\n"+'                <div class="list">\n'+"                    <ul></ul>\n"+"                </div>\n"+"            </div>\n"+"        </div>\n"+"    </div>\n"+'    <div class="switch-player">\n'+'        <i class="fa fa-angle-right" style="margin-top: 20px;"></i>\n'+"    </div>\n"+"</div>\n"+'<div id="lzxTips" style="top:50px;"></div>\n'+'<div id="lzxLrc"></div>');var r=new Audio,n=$("#lzxPlayer"),c=$("#lzxTips"),d=$("#lzxKsc,#lzxLrc"),u=$(".switch-player",n),h=$(".status",n),m=$(".song",n),g=$(".cover",n),f=$(".time",n),p=$(".song-list .list",n),v=$(".album-list",n),y=$(".player .artist",n),w=$(".player .artist1",n),I=$(".player .moshi",n),x=$(".player .geci",n),b=$(".player .switch-ksclrc",n),L=$(".volume-controls .slider",n);$rateBuffered=$(".musicbottom .rate-buffered",n);$rateSlider=$(".rate .progress",n);songFrom33="开启",songFrom44="",songFrom55="",roundcolor="#6c6971",lightcolor="#81c300",cur="current",ycgeci=true,first=1,volume=$.cookie("lzx_player_volume")?$.cookie("lzx_player_volume"):"0.666",albumId=0,songId=0,songTotal=0,random=true,rateIsDown=false,rateMouse={},rateTouch={},hasgeci=true,cicleTime=null,hasLrc=false,lrcTimeLine=[],lrcHeight=40,lrcTime=null,lrcCont="",dogInterval=null,songFroms={wy:"网易音乐",kg:"酷狗音乐",qq:"QQ音乐",xm:"虾米音乐",local:"本地音乐"};if(e){$("#lzxLrc").addClass("phone");n.addClass("phone");$(".new-volume",n).hide()}function T(e){return("00"+Math.floor(e/60)).substr(-2)+":"+("00"+Math.floor(e%60)).substr(-2)}g.html('<img src="/images/player_cover.jpg">');m.html('<a style="color:#f00">正在初始化</a>');y.html('<a style="color:#f00">haoxiang.eu.org</a>');w.html('<a style="color:#f00">音乐播放器</a>');x.html('<i class="fa fa-times-circle"></i> 歌词未载入');window.lzxPlayerReload=function(){try{clearInterval(cicleTime)}catch(e){}try{clearInterval(lrcTime)}catch(e){}try{clearInterval(dogInterval)}catch(e){}$("#lzxPlayer").remove();$("#lzxLrc").remove();$("#lzxTips").remove();r.pause()};var C={play:function(){g.addClass("coverplay");n.addClass("playing");$rateBuffered.width(0);cicleTime=setInterval(function(){if(!rateMouse.isDown&&!rateTouch.isTouchDown){f.text(T(r.currentTime)+" / "+T(r.duration));$(".rate-on",$rateSlider).width(r.currentTime/r.duration*100+"%")}if(r.currentTime<r.duration/2){h.css("background-image","linear-gradient(90deg, "+roundcolor+" 50%, transparent 50%, transparent), linear-gradient("+(90+(270-90)/(r.duration/2)*r.currentTime)+"deg, "+lightcolor+" 50%, "+roundcolor+" 50%, "+roundcolor+")")}else{h.css("background-image","linear-gradient("+(90+(270-90)/(r.duration/2)*r.currentTime)+"deg, "+lightcolor+" 50%, transparent 50%, transparent), linear-gradient(270deg, "+lightcolor+" 50%, "+roundcolor+" 50%, "+roundcolor+")")}var e=r.buffered;if(e.length!==0){$rateBuffered.width(parseInt(e.end(e.length-1)*100/r.duration*100)/100+"%")}},800);if(hasLrc){lrcTime=setInterval(P.lrc.play,500);$("#lzxLrc").addClass("show");$(".switch-down").css("right","65px");$(".switch-ksclrc").show()}},pause:function(){clearInterval(cicleTime);n.removeClass("playing");$(".switch-ksclrc").hide();$(".switch-down").css("right","35px");if(hasLrc){P.lrc.hide()}},error:function(){clearInterval(cicleTime);n.removeClass("playing");k.show(songSheetList[albumId].songNames[songId]+" - 资源获取失败！尝试获取下一首...");C.next()},seeking:function(){k.show("加载中...")},volumechange:function(){var e=window.parseInt(r.volume*100);$(".progress2",L).height(e+"%");k.show("音量："+e+"%");if($.cookie!=undefined){$.cookie("lzx_player_volume",r.volume)}},getInfos:function(e){g.removeClass("coverplay");songId=e;A();songFrom55=songFroms[songSheetList[albumId].songTypes[songId]];musictype=songSheetList[albumId].songTypes[songId];M()},getSongId:function(e){return e>=songTotal?0:e<0?songTotal-1:e},next:function(){clearInterval(cicleTime);random?C.getInfos(window.parseInt(Math.random()*songTotal)):C.getInfos(C.getSongId(songId+1))},prev:function(){clearInterval(cicleTime);random?C.getInfos(window.parseInt(Math.random()*songTotal)):C.getInfos(C.getSongId(songId-1))}};var S=null;var k={show:function(e){clearTimeout(S);$("#lzxTips").text(e).addClass("show");this.hide()},hide:function(){S=setTimeout(function(){$("#lzxTips").removeClass("show")},3e3)}};r.addEventListener("play",C.play,false);r.addEventListener("pause",C.pause,false);r.addEventListener("ended",C.next,false);r.addEventListener("playing",C.playing,false);r.addEventListener("volumechange",C.volumechange,false);r.addEventListener("error",C.error,false);r.addEventListener("seeking",C.seeking,false);u.click(function(){n.toggleClass("show")});$(".pause",n).click(function(){hasgeci=false;$("li",v).eq(albumId).addClass(cur).find(".artist").html("暂停播放 > ").parent().siblings().removeClass(cur).find(".artist").html("").parent();k.show("暂停播放 - "+songSheetList[albumId].songNames[songId]);g.removeClass("coverplay");r.pause();setTimeout(function(){k.show("播放器下次访问将自动暂停")},4e3);$.cookie("auto_playre","no")});$(".play",n).click(function(){hasgeci=true;$("#lzxLrc,#lzxKsc").show();$("li",v).eq(albumId).addClass(cur).find(".artist").html("当前播放 > ").parent().siblings().removeClass(cur).find(".artist").html("").parent();W();setTimeout(function(){k.show("播放器下次访问将自动播放")},4e3);$.cookie("auto_playre","yes")});$(".prev",n).click(function(){hasgeci=true;$("#lzxLrc,#lzxKsc").show();C.prev();$.cookie("auto_playre","yes")});$(".next",n).click(function(){hasgeci=true;$("#lzxLrc,#lzxKsc").show();C.next();$.cookie("auto_playre","yes")});$(".random",n).click(function(){$(this).addClass(cur);$(".loop",n).removeClass(cur);random=true;k.show("随机播放");I.html('<i class="random fa fa-random current"></i> 随机播放');$.cookie("random_play",true)});$(".loop",n).click(function(){$(this).addClass(cur);$(".random",n).removeClass(cur);random=false;k.show("顺序播放");I.html('<i class="loop fa fa-retweet"></i> 顺序播放');$.cookie("random_play",false)});L.click(function(e){var s=$(document).scrollTop();var a=L.height(),t=L.offset().top-s;var i=(1-(e.clientY-t)/a).toFixed(2);r.volume=i>1?1:i});$rateSlider.click(function(e){var s=$rateSlider.width(),a=$rateSlider.offset().left,t=e.clientX;r.currentTime=r.duration*((t-a)/s)});var z=false;$(".drag",L).mousedown(function(){z=true});$(".drag",$rateSlider).on("touchstart",function(e){rateTouch.progressWidth=$rateSlider.width();rateTouch.isTouchDown=true;rateTouch.startX=e.originalEvent.touches[0].clientX;rateTouch.rateOnWidth=parseFloat(($(".rate-on",$rateSlider).width()/rateTouch.progressWidth).toFixed(2))});$(".drag",$rateSlider).mousedown(function(e){rateMouse.progressWidth=$rateSlider.width();rateMouse.isDown=true;rateMouse.startX=e.clientX;rateMouse.rateOnWidth=parseFloat(($(".rate-on",$rateSlider).width()/rateMouse.progressWidth).toFixed(2))});window.addEventListener("touchmove",function(e){if(rateTouch.isTouchDown){var s=parseFloat(((e.touches[0].clientX-rateTouch.startX)/rateTouch.progressWidth).toFixed(2))+rateTouch.rateOnWidth;if(s>=0&&s<=1){$(".rate-on",$rateSlider).width(s*100+"%");rateTouch.currentTime=r.duration*s;f.text(T(rateTouch.currentTime)+" / "+T(r.duration))}}return false},{passive:false});$(window).on({mousemove:function(e){if(z){var s=$(document).scrollTop();var a=L.height(),t=L.offset().top-s,i=e.clientY;if(i>=t&&i<=t+a){r.volume=(1-(i-t)/a).toFixed(2)}}else if(rateMouse.isDown){var o=parseFloat(((e.clientX-rateMouse.startX)/rateMouse.progressWidth).toFixed(2))+rateMouse.rateOnWidth;if(o>=0&&o<=1){$(".rate-on",$rateSlider).width(o*100+"%");rateMouse.currentTime=r.duration*o;f.text(T(rateMouse.currentTime)+" / "+T(r.duration))}}},mouseup:function(){z=false;if(rateMouse.isDown){r.currentTime=rateMouse.currentTime;rateMouse.isDown=false}},touchend:function(e){if(rateTouch.isTouchDown){r.currentTime=rateTouch.currentTime;rateTouch.isTouchDown=false}}});$(".switch-playlist").click(function(){n.toggleClass("showAlbumList")});p.mCustomScrollbar();$(".song-list .musicheader,.song-list .fa-angle-right",n).click(function(){n.removeClass("showSongList")});$(".switch-ksclrc").click(function(){n.toggleClass("ksclrc");$("#lzxLrc").toggleClass("hide");$("#lzxKsc").toggleClass("hidePlayer");if(!$("#lzxLrc").hasClass("hide")){ycgeci=true;if(hasLrc){x.html('<i class="fa fa-check-circle"></i> 歌词开启')}k.show("开启歌词显示");songFrom33="开启";b.html('<i class="fa fa-toggle-on" title="关闭歌词"></i>')}else{ycgeci=false;if(hasLrc){x.html('<i class="fa fa-times-circle"></i> 歌词关闭')}k.show("歌词显示已关闭");songFrom33="关闭";b.html('<i class="fa fa-toggle-off" title="打开歌词"></i>')}D()});lzxPlayer.playList={creat:{album:function(){$(".musicheader",v).html("网易云音乐 - 专辑列表");var e=songSheetList.length,s="";for(var a=0;a<e;a++){s+='<li><i class="fa fa-angle-right"></i><span class="index">'+(a+1)+'</span><span class="artist"></span>《'+songSheetList[a].songSheetName+"》 - "+songSheetList[a].author+"</li>"}$(".list",v).html("<ul>"+s+"</ul>").mCustomScrollbar();$("li",v).click(function(){var e=$(this).index();$(this).hasClass(cur)?lzxPlayer.playList.creat.song(e,true):lzxPlayer.playList.creat.song(e,false);n.addClass("showSongList")});songTotal=songSheetList[albumId].songIds.length;random?C.getInfos(window.parseInt(Math.random()*songTotal)):C.getInfos(C.getSongId(0))},song:function(e,s){songTotal=songSheetList[e].songIds.length;$(".song-list .musicheader span",n).text(songSheetList[e].songSheetName+"("+songTotal+")");var a="";for(var t=0;t<songTotal;t++){a+='<li><span class="index">'+(t+1)+'</span><span class="artist"></span>'+songSheetList[e].songNames[t]+"</li>"}$("ul",p).html(a);p.mCustomScrollbar("update");if(s){$("li",p).eq(songId).addClass(cur).siblings().removeClass(cur);p.mCustomScrollbar("scrollTo",$("li.current",p).position().top-120)}else{p.mCustomScrollbar("scrollTo","top")}$("li",p).click(function(){hasgeci=true;$("#lzxLrc,#lzxKsc").show();albumId=e;if($(this).hasClass(cur)){k.show("正在播放 - "+songSheetList[albumId].songNames[songId].replace(songId+1+"#",""))}else{$.cookie("auto_playre","yes");songId=$(this).index();C.getInfos(songId)}})}}};var P={load:function(){P.lrc.hide();hasLrc=false;$("#lzxLrc,#lzxKsc").html("");setTimeout(function(){if(hasgeci){x.html('<i class="fa fa-check-circle"></i> 歌词'+songFrom33)}else{x.html('<i class="fa fa-times-circle"></i> 歌词'+songFrom33)}$(".switch-down").css("right","65px");$(".switch-ksclrc").show();$.ajax({url:l+"/api/musicLyric?songId="+songSheetList[albumId].songIds[songId]+"&type="+songSheetList[albumId].songTypes[songId],type:"GET",dataType:"script",success:function(){if(lrcstr==""){songFrom44=" - 暂无歌词!";x.html('<i class="fa fa-times-circle"></i> 暂无歌词');$(".switch-ksclrc").hide();$(".switch-down").css("right","35px")}else{if(lrcstr.indexOf("[00")>=0){setTimeout(function(){if(!$("#lzxLrc").hasClass("hide")){songFrom44=" - 歌词获取成功!"}else{songFrom44=" - 歌词已关闭！"}P.lrc.format(lrcstr)},500)}else{songFrom44=" - 暂无歌词!";x.html('<i class="fa fa-times-circle"></i> 暂无歌词');$(".switch-ksclrc").hide();$(".switch-down").css("right","35px")}}},error:function(){songFrom44=" - 暂无歌词!";x.html('<i class="fa fa-times-circle"></i> 暂无歌词');$(".switch-ksclrc").hide();$(".switch-down").css("right","35px")}})},50)},lrc:{format:function(e){hasLrc=true;function s(e){var s=e.split(":"),a=+s[0],t=+s[1].split(".")[0],i=+s[1].split(".")[1];return a*60+t+Math.round(i/1e3)}var a=e.replace(/\[[A-Za-z]+:(.*?)]/g,"").split(/[\]\[]/g),t="";lrcTimeLine=[];for(var i=1;i<a.length;i+=2){var o=s(a[i]);lrcTimeLine.push(o);if(i==1){t+='<li class="lzxLrc'+o+' current" style="color:rgba('+mainColor+',1)">'+a[i+1]+"</li>"}else{t+='<li class="lzxLrc'+o+'">'+a[i+1]+"</li>"}}$("#lzxLrc").html("<ul>"+t+"</ul>");setTimeout(function(){if(r.paused){$(".switch-ksclrc").hide();$(".switch-down").css("right","35px")}else{$("#lzxLrc").addClass("show")}},500);lrcTime=setInterval(P.lrc.play,500)},play:function(){var e=Math.round(r.currentTime);if($.inArray(e,lrcTimeLine)>0){var s=$(".lzxLrc"+e);if(!s.hasClass(cur)){s.css("color","rgba("+mainColor+",1)");s.addClass(cur).siblings().removeClass(cur).css("color","");$("#lzxLrc").animate({scrollTop:lrcHeight*s.index()})}}else{lrcCont=""}},hide:function(){clearInterval(lrcTime);$("#lzxLrc").removeClass("show")}}};r.volume=volume;if(volume==1){$(".volume-on",n).width("100%")}getFestival();var F=$.ajax({url:"/songList.json",async:false});if(undefined!=F){var N=F.responseJSON;if(songSheetList.length>0){N.forEach(function(e){songSheetList.push(e)})}else{songSheetList=N}}else{k.show("歌曲列表获取失败!")}if(songSheetList.length==0){songSheetList.push(songDemoList)}if(playerWidth!==-1){document.body.style.setProperty("--player-width",playerWidth+"px")}if(coverWidth!==-1){document.body.style.setProperty("--cover-width",coverWidth+"px")}if(showNotes!==1){$(".status .note",n).hide()}if(autoPopupPlayer!==-1){setTimeout(function(){n.addClass("show")},autoPopupPlayer*1e3)}if($.cookie==undefined||$.cookie("random_play")!=null){if($.cookie==undefined||$.cookie("random_play")=="true"){$(".loop",n).removeClass(cur);$(".random",n).addClass(cur);I.html('<i class="random fa fa-random"></i> 随机播放');random=true}else{$(".loop",n).addClass(cur);$(".random",n).removeClass(cur);I.html('<i class="loop fa fa-retweet"></i> 顺序播放');random=false}}else{if(randomPlayer!=1){$(".loop",n).addClass(cur);$(".random",n).removeClass(cur);random=false;I.html('<i class="loop fa fa-retweet"></i> 顺序播放')}}if($.cookie==undefined||$.cookie("lzx_player_volume")=="0.666"){volume=defaultVolume/100;r.volume=volume}C.volumechange();albumId=defaultAlbum-1;if(showLrc==0){$("#lzxLrc").addClass("hide");ycgeci=false;if(hasLrc){x.html('<i class="fa fa-times-circle"></i> 歌词关闭')}k.show("歌词显示已关闭");songFrom33="关闭";b.html('<i class="fa fa-toggle-off" title="打开歌词"></i>')}if(showGreeting==1){k.show(greeting)}setTimeout(function(e){lzxPlayer.playList.creat.album()},1e3);dogInterval=setInterval(function(){if(!a){localStorage.setItem("lastFeed",(new Date).getTime().toString())}var e=document.body.style.getPropertyValue("--player-width");if(typeof playerWidth!="undefined"&&playerWidth!==-1&&e!=playerWidth+"px"){document.body.style.setProperty("--player-width",playerWidth+"px")}var s=document.body.style.getPropertyValue("--cover-width");if(typeof coverWidth!="undefined"&&coverWidth!==-1&&s!=coverWidth+"px"){document.body.style.setProperty("--cover-width",coverWidth+"px")}},1e3);window.addEventListener("beforeunload",function(e){localStorage.setItem("isLoad","false")},true);function _(e,s,a){s=s||6;a=a||"...";var t="";var i=e.length;var o=0;for(var l=0;o<s*2&&l<i;l++){o+=e.charCodeAt(l)>128?2:1;t+=e.charAt(l)}if(l<i)t+=a;return t}function M(){r.src=l+"/api/musicUrl?songId="+songSheetList[albumId].songIds[songId]+"&type="+songSheetList[albumId].songTypes[songId];$(".switch-down").show();$(".switch-down").html('<a class="down"><i class="fa fa-cloud-download" title="从'+songFrom55+"下载："+songSheetList[albumId].songNames[songId]+" - "+songSheetList[albumId].artistNames[songId]+'"></i></a>');$(".down").click(function(){window.open(r.src,"newwindow")});m.html('<span title="'+songSheetList[albumId].songNames[songId]+'">'+_(songSheetList[albumId].songNames[songId])+"</span>");window.console.log(name+" - 当前播放："+songSheetList[albumId].songNames[songId]+" - "+songSheetList[albumId].artistNames[songId]);y.html('<span title="'+songSheetList[albumId].artistNames[songId]+'">'+_(songSheetList[albumId].artistNames[songId])+"</span>");w.html('<span title="'+songSheetList[albumId].albumNames[songId]+'">'+_(songSheetList[albumId].albumNames[songId])+"</span>");var e=new Image;e.src="/images/player_cover.jpg";g.addClass("changing");e.onload=function(){g.removeClass("changing");K()};e.error=function(){e.src="/images/player_cover.jpg";setTimeout(function(){k.show(songSheetList[albumId].songNames[songId]+" - 专辑图片获取失败！")},4e3)};g.html(e);if(background==1){$(".blur-img .blur",n).attr("src","/images/player_cover.jpg")}else{if($(".blur-img").length>0){$(".blur-img").remove()}}P.load();if(first==1){first=2;if(autoPlayer==1&&($.cookie("auto_playre")==null||$.cookie("auto_playre")==="yes")){W()}else{k.show("播放器自动暂停");g.removeClass("coverplay");r.pause()}}else{W()}$(window).scroll(function(){var e=$(this).scrollTop();var s=$(window.document).height();var a=$(this).height();if(e+a==s){if(hasgeci&&ycgeci){n.addClass("ksclrc");$("#lzxLrc").addClass("hide");$("#lzxKsc").addClass("hidePlayer");x.html('<i class="fa fa-times-circle"></i> 歌词隐藏');b.html('<i class="fa fa-toggle-off" title="歌词隐藏"></i>');if(hasLrc){k.show("歌词自动隐藏")}}}else{if(hasgeci&&ycgeci){n.removeClass("ksclrc");$("#lzxLrc").removeClass("hide");$("#lzxKsc").removeClass("hidePlayer");if(hasLrc){x.html('<i class="fa fa-check-circle"></i> 歌词开启')}b.html('<i class="fa fa-toggle-on" title="关闭歌词"></i>')}}});D()}function W(){k.show("开始播放 - "+songSheetList[albumId].songNames[songId]);r.play()}function A(){$("li",v).eq(albumId).addClass(cur).find(".artist").html("当前播放 > ").parent().siblings().removeClass(cur).find(".artist").html("").parent();p.find("li").eq(songId).addClass(cur).siblings().removeClass(cur);if($("ul",p).html()!="")p.mCustomScrollbar("scrollTo",$("li.current",p).position().top-120)}function K(){n.css({background:"rgba("+mainColor+",.8)"});u.css({background:"rgba("+mainColor+",.3)"});c.css({background:"rgba("+mainColor+",.6)"});d.css({background:"rgba("+mainColor+",.3)"});$(".infos,.control,.status .note",n).css({color:"rgb("+font_color+")"})}function D(){if(e){return}$("#lzxPlayer span,#lzxPlayer i").each(function(){$("#tooltip").remove();if(this.title){var s=this.title;$(this).unbind("mouseover mouseout");$(this).mouseover(function(e){this.title="";$("body").append('<div id="tooltip">'+s+"</div>");$("#tooltip").css({left:e.pageX-15+"px",top:e.pageY+30+"px",opacity:"0.8"}).fadeIn(250)}).mouseout(function(){this.title=s;$("#tooltip").remove()}).mousemove(function(e){$("#tooltip").css({left:e.pageX-15+"px",top:e.pageY+30+"px"})})}})}};lzxPlayerInit();